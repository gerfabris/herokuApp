<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App WebSocket</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
        crossorigin="anonymous"
    />
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <header>
        <nav>
            <a href="/productos-test" class="container-fluid ">
                <button class="btn btn-dark my-4 ">Ir a Productos Test</button>
            </a>
        </nav>
    </header>
    <main class="container-fluid">
        <h1 class="h1 my-4 text-primary text-center">Formulario y Chat con WebSocket</h1>
        <section class="section__bienvenida section">
            {{#if username }}
                <h3 class="alert-success rounded p-3">Bienvenido {{username}}</h3>  
                {{else}}
                <h3 class="alert-success rounded p-3">Bienvenido ðŸš€</h3>  
            {{/if}}
            <form method="POST">
                <a href="/logout" class="my-4 container-fluid">
                    <button type="submit" class="btn btn-dark">Cerrar sesiÃ³n</button>
                    <div id="logout"></div>
                </a>            
            </form>
        </section>
        
        <div>
            <h2 class="text-primary mt-4 text-center">Ingrese datos</h2>
            <!-- <form action="/productos" method="post">  -->
            <form onsubmit="return addProduct(this)" class="section">
                <div class="mb-3 ">
                    <input type="text" class="form-control" name="title" placeholder="Nombre del producto" id="title"/>
                    <label for="title" class="form-label my-2" >Nombre del producto</label>
                </div>
                <div class="mb-3">
                    <input type="number" class="form-control" name="price" placeholder="Precio del producto" id="price"/>
                    <label for="price" class="form-label my-2">Precio del producto</label>
                </div>
                <div class="mb-3">
                    <input type="url" class="form-control" name="thumbnail" placeholder="Link de imagen producto" id="thumbnail"/>
                    <label for="thumbnail" class="form-label my-2">Link foto del producto</label>
                </div>
                <button type="submit" class="btn btn-dark">Cargar producto</button>
            </form>
        </div>
        <div class="col my-4">
            <h3 class="text-primary h3 text-center">Tabla de productos</h3>
            <div id="list" class="section__tablaProductos">
            </div>
        </div>
        <div class="chat-container my-4">
            <h2 class="text-primary h2 my-2 text-center">Centro de mensajes</h2>
            <h3 class="text-primary h2 my-2 text-center" id="compresion"></h3>
            <form onsubmit="return addMessage()" class="my-4 section">
                <input type="text" id="email" class="form-control w-75 my-2" placeholder="Indique su email"/>
                <input type="text" id="nombre" class="form-control w-75 my-2" placeholder="Indique su nombre"/>
                <input type="text" id="apellido" class="form-control w-75 my-2" placeholder="Indique su apellido"/>
                <input type="number" id="edad" class="form-control w-75 my-2" placeholder="Indique su edad"/>
                <input type="text" id="alias" class="form-control w-75 my-2" placeholder="Indique su alias"/>
                <input type="url" id="avatar" class="form-control w-75 my-2" placeholder="Indique su avatar"/>
                <input type="text" id="text" class="form-control w-75 my-2" placeholder="Escriba su mensaje"/>
                <button type="submit" class="btn btn-dark">Enviar mensaje</button>
            </form>
            <div id="messages" class="messages-container container my-4">
            </div>
        </div>
    </main>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/normalizr@3.6.1/dist/normalizr.browser.min.js"></script>
    <script src="../js/index.js"></script>
</body>
</html>